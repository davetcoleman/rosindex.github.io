<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="A community-maintained index of known ROS packages.
">

    <link rel="canonical" href="http://rosindex.github.io/p/rtt_roscomm/rosdistro/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">

    <script type="text/javascript" src="/js/jquery.js"></script>
    <script src="/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="/js/jquery-cookie-1.4.1/jquery.cookie.js" type="text/javascript"></script>

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <!--<a class="page-link" href="/p/rtt_roscomm/rosdistro/index.html"></a>-->
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin:20px">
  <div class="row">
    <ol class="breadcrumb">
      <li><a href="/">Home</a></li>
      <li><a href="/packages">Packages</a></li>
      <li><a href="/packages/rtt_roscomm">rtt_roscomm</a></li>
      <li class="active">rosdistro</li>
    </ol>
  </div>
  <div class="row">
    <div class="well well-sm">
  <table class="table-condensed">
    <tbody>
      <tr>
        <!--<td><span class="pull-right">description</span></td>-->
        <td>
          <h4>rtt_ros_integration <small></small></h4>
          
        </td>
      </tr>
      
        <tr>
          <td>
<div id="repo-switch" class="btn-group btn-group-justified" role="group">
  <div class="btn-group" role="group">
    <div class="dropdown">
      <! -- TODO: add disabled when only 1 version is known -->
      <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown">
        <span class="pull-left">
          <span class="glyphicon glyphicon-star"></span>
          rosdistro ( https://github.com/orocos/rtt_ros_integration.git )
        </span>
        <span class="pull-right"><span class="caret"></span></span>
      </button>
      <ul class="dropdown-menu" role="menu">
        
          <li role="presentation">
          <a id="rosdistro" role="menuitem" tabindex="-1" href="/p/rtt_roscomm/rosdistro" data="rosdistro">
              <span class="glyphicon glyphicon-star"></span>
              rosdistro ( https://github.com/orocos/rtt_ros_integration.git )
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
</td>
        </tr>
      
      
        <tr>
          <td>
            

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
  <label id="indigo-option" class="distro-button btn btn-xs btn-default" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  
  <label id="hydro-option" class="distro-button btn btn-xs btn-primary" href="#hydro" data="hydro">
      <input type="radio" name="options" id="hydro-radio" autocomplete="off"> hydro
    </label>
  
  <label id="groovy-option" class="distro-button btn btn-xs btn-primary" href="#groovy" data="groovy">
      <input type="radio" name="options" id="groovy-radio" autocomplete="off"> groovy
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-primary" data-toggle="dropdown" id="older-distro-button">
    <input type="radio" name="options" autocomplete="off">
    <span id="older-label">Older</span>
    <span class="caret"></span>
  </label>
  <ul class="dropdown-menu" role="menu">
    
      <li data="fuerte" id="fuerte-option" class=" older-distro-option"  href="#fuerte">
      <a href="#fuerte" data="fuerte" id="fuerte-button">fuerte</a>
      </li>
    
      <li data="electric" id="electric-option" class=" older-distro-option"  href="#electric">
      <a href="#electric" data="electric" id="electric-button">electric</a>
      </li>
    
      <li data="diamondback" id="diamondback-option" class="disabled older-distro-option"  href="#diamondback">
      <a href="#diamondback" data="diamondback" id="diamondback-button">diamondback</a>
      </li>
    
      <li data="c-turtle" id="c-turtle-option" class="disabled older-distro-option"  href="#c-turtle">
      <a href="#c-turtle" data="c-turtle" id="c-turtle-button">c-turtle</a>
      </li>
    
  </ul>
</div>
</div>

          </td>
        </tr>
      
    </tbody>
  </table>
</div>

  </div>
  <div class="row">
    
      <div class="distro distro-indigo">
        
        <em>No branch for distro <strong>indigo</strong>. Known supported distros are highlighted in the buttons above.</em>
        
      </div>
    
      <div class="distro distro-hydro">
        
          
          <div class="panel panel-default">
            <div class="panel-heading">README</div>
            <div class="readme-" style="margin: 20px">
              <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="rendered-markdown">
<h1>RTT ROS Communications</h1>

<p><strong><em>Nomenclature Warning:</em></strong>  <em>A "ROS Service" is a remote procedure call
that hapens over the ROS communication protocols and an "Orocos/RTT Service" is
a grouping of properties, functions, and data ports. "ROS Services" satisfy a
similar role to "Orocos/RTT Operations".</em> </p>

<h2>Contents </h2>

<p>This package serves several purposes. It provides:
* An Orocos RTT Service for publishing and subscribing to ROS topics
* Orocos RTT Services for calling and serving ROS services
* Orocos typekits for ROS message primitive types
* A template for generating wrapper packages for ROS .msg and .srv files
  * typekits for .msg files
  * transport plugin for .msg files
  * ros service proxy factories for .srv files</p>

<h3>Plugins</h3>

<h4>ROS Topics</h4>

<p>This package provides a global RTT service for creating real-time-safe
connections between ROS topics and Orocos RTT data ports.</p>

<p>This package provides two Orocos connection policies: buffered and 
unbuffered connections to ROS topics. Publishing and subscribing are done
with the same command, and the topic type is inferred from the Orocos port
type. Connection policies are created with these operations:</p>

<ul>
<li>
<code>rostopic.connection(TOPIC_NAME)</code>: Creates a connection with a buffer length
of 1.</li>
<li>
<code>rostopic.bufferedConnection(TOPIC_NAME, BUFFER_LENGTH)</code>: Creates a
connection with a user-supplied buffer length.</li>
<li>
<code>rostopic.unbufferedConnection(TOPIC_NAME)</code>: Creates an unbuffered connection, where
the writing thread immediately publishs the message (publishing only).
This is not real-time safe.</li>
</ul>
<p>Note that if <code>TOPIC_NAME</code> is prefixed with a tilde <code>~</code>, it will be resolved to
the process's private namespace, similarly to how topic names are resolved in
rospy.</p>

<h4>ROS Services</h4>

<p>This package provides both a global RTT service and a task-scoped service for
facilitating communication with ROS services. The global service,
<code>rosservice_registry</code> is used to register factories for creating proxies to ROS
service clients and servers. The task-scoped service is ued to bind RTT
operations and operation callers to ROS services. In general, users will only
use the task-scoped RTT service, similarly to how the <code>rtt_rosparam</code> service is
used.</p>

<p>The task-scoped RTT service <code>rosservice</code> provides the following operations:
* <code>rosservice.connect(RTT_OPERATION_NAME, ROS_SERVICE_NAME, ROS_SERVICE_TYPE)</code>
  * Connect an RTT operation to ROS service. Note that this is the same
    function whether the RTT operation is an operation or an operation caller.
  * <code>RTT_OPERATION_NAME</code>: The task-scoped operation/operation caller name, with
    provided/required services separated by dots (like <code>foo.bar.baz.op</code>)
  * <code>ROS_SERVICE_NAME</code>: The name of the service client/server in the ROS graph
    (like <code>/some/ros/ns/my_service</code>)
  * <code>ROS_SERVICE_TYPE</code>: The full typename of the service (like
    <code>std_srvs/Empty</code>)</p>

<p>The global RTT service <code>rosservice_registry</code> provides the following operations:
* <code>rosservice_registry.registerServiceFactory(FACTORY)</code>: Register a ROS service
  factory
* <code>rosservice_registry.hasServiceFactory(TYPENAME)</code>: Check if ROS service type
  has been registered
* <code>rosservice_registry.geServiceFactory(TYPENAME)</code>: Get a ROS service
  client/server factory</p>

<h3>Code Generation</h3>

<p>This package also provides facilities for generating typekits for ROS service
types defined in <code>.srv</code> files as well as generating plugins which register ROS
service types with the <code>rosservice_registry</code> service.</p>

<h2>Usage</h2>

<h3>Connecting an Orocos Port to a ROS Topic</h3>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">## Imports</span>
<span class="n">import</span><span class="p">(</span><span class="s">"rtt_roscomm"</span><span class="p">)</span>
<span class="c"># Publish</span>
<span class="n">stream</span><span class="p">(</span><span class="s">"my_component.my_output"</span><span class="p">,</span> <span class="n">ros</span><span class="o">.</span><span class="n">comm</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="s">"my_ros_output"</span><span class="p">))</span>
<span class="c"># Subscribe</span>
<span class="n">stream</span><span class="p">(</span><span class="s">"my_component.my_input"</span><span class="p">,</span> <span class="n">ros</span><span class="o">.</span><span class="n">comm</span><span class="o">.</span><span class="n">topic</span><span class="p">(</span><span class="s">"my_ros_input"</span><span class="p">))</span>
</code></pre></div>
<p>You can also set up these connections in C++ code:</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="cp">#include &lt;rtt_roscomm/rtt_rostopic.h&gt;</span>

<span class="c1">// ...</span>

  <span class="c1">// Add the port and stream it to a ROS topic</span>
  <span class="k">this</span><span class="o">-&gt;</span><span class="n">ports</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">addPort</span><span class="p">(</span><span class="s">"my_port"</span><span class="p">,</span> <span class="n">my_port_</span><span class="p">);</span>
  <span class="n">my_port_</span><span class="p">.</span><span class="n">createStream</span><span class="p">(</span><span class="n">rtt_roscomm</span><span class="o">::</span><span class="n">topic</span><span class="p">(</span><span class="s">"my_ros_topic"</span><span class="p">));</span>

<span class="c1">// ...</span>
</code></pre></div>
<p>To create a privately-scoped or component-scoped topic, you can do the following:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">// Privately-scoped (resolves to NODE_NAME/TOPIC_NAME)
my_port_.createStream(rtt_roscomm::topic("~my_private_ros_topic"));
// Component-scoped (resolves to NODE_NAME/COMPONENT_NAME/TOPIC_NAME)
my_port_.createStream(rtt_roscomm::topic("~" + this-&gt;getName() + "/my_component_scoped_ros_topic"));
</code></pre></div>
<h3>Connecting RTT Operations to ROS Services</h3>

<p>To connect an Orocos operation to a ROS service via .ops script from within an
Orocos DeploymentComponent: </p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="c">## Imports</span>
<span class="n">import</span><span class="p">(</span><span class="s">"rtt_roscomm"</span><span class="p">)</span>
<span class="n">import</span><span class="p">(</span><span class="s">"rtt_std_srvs"</span><span class="p">)</span>

<span class="c">## Load some application-specific component</span>
<span class="n">loadComponent</span><span class="p">(</span><span class="s">"some_component_name"</span><span class="p">,</span><span class="s">"some_component_package::SomeComponent"</span><span class="p">)</span>
<span class="c">## Load the rosservice RTT service for this components</span>
<span class="n">loadService</span><span class="p">(</span><span class="s">"some_component_name"</span><span class="p">,</span><span class="s">"rosservice"</span><span class="p">)</span>

<span class="c">## Expose a provided operation of this component as a ROS service</span>
<span class="n">some_component_name</span><span class="o">.</span><span class="n">rosservice</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
  <span class="s">"some_provided_service.some_operation"</span><span class="p">,</span>
  <span class="s">"/some/ros/namespace/empty"</span><span class="p">,</span> <span class="s">"std_srvs/Empty"</span><span class="p">)</span>

<span class="c">## Expose a ROS service to this component</span>
<span class="n">some_component_name</span><span class="o">.</span><span class="n">rosservice</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
  <span class="s">"some_Required_service.some_operation_caller"</span><span class="p">,</span>
  <span class="s">"/some/ros/namespace/empty"</span><span class="p">,</span> <span class="s">"std_srvs/Empty"</span><span class="p">)</span>
</code></pre></div>
<h3>Making a Package's ROS .msg and .srv Types Available</h3>

<p>Generally, you can create a catkin package simply with the <code>create_rtt_msgs</code>
script by running:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">rosrun rtt_roscomm create_rtt_msgs my_msgs
</code></pre></div>
<p>All this does is create a package with the following CMakeLists.txt and
corresponding package.xml:</p>
<div class="highlight"><pre><code class="language-cmake" data-lang="cmake"><span class="nb">project</span><span class="p">(</span><span class="s">rtt_my_msgs</span><span class="p">)</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">catkin</span> <span class="s">REQUIRED</span> <span class="s">COMPONENTS</span> <span class="s">rtt_roscomm</span><span class="p">)</span>

<span class="c"># Generate typekits for ros .msg files</span>
<span class="nb">ros_generate_rtt_typekit</span><span class="p">(</span><span class="s">my_msgs</span><span class="p">)</span>
<span class="c"># Generate the plugin which makes the services in my_msgs available</span>
<span class="nb">ros_generate_rtt_service_proxies</span><span class="p">(</span><span class="s">my_msgs</span><span class="p">)</span>

<span class="c"># Call orocos_generate_package() after the above to export the proper targets</span>
<span class="nb">orocos_generate_package</span><span class="p">(</span>
  <span class="s">DEPENDS</span> <span class="s">my_msgs</span>
  <span class="s">DEPENDS_TARGETS</span> <span class="s">rtt_roscomm</span>
<span class="p">)</span>
</code></pre></div>
<p>The <code>ros_generate_rtt_service_proxies()</code> cmake function will generate an RTT
plugin which registers factories for all of the services in the named package
when the plugin is loaded.</p>

<h2>Design</h2>

<h3>ROS Services</h3>

<p>The <code>rosservice_registry</code> RTT service contains a list of ROS service clients
and servers which are associated with RTT operations and operationcallers,
respectively.  The <code>rosservice.connect</code> operation, inspects whether
the first argument is an Operation or OperationCaller. If it is an <strong>RTT
Operation</strong>, it will instantiate a <strong>ROS service server</strong> wrapped in an <strong>RTT
OperationCaller</strong> to call the operation. If it is an <strong>RTT OperationCaller</strong>,
it will instantiate a <strong>ROS service client</strong> wrapped in an <strong>RTT Operation</strong> to
be called by the operation caller. </p>

<p>The provided and required services on which the wrapper operations and
operation callers are created are private to the <code>rosservice</code> service. </p>

<h2>Todo</h2>

<ul>
<li>Implement typekit generation (similar to rtt_rostopic) so that services can
be called from the taskbrowser.</li>
<li>Automatically detect the type of ROS service from the service name or the
operation signature.</li>
</ul>
</div></body></html>

            </div>
          </div>
        
      </div>
    
      <div class="distro distro-groovy">
        
        <em>No branch for distro <strong>groovy</strong>. Known supported distros are highlighted in the buttons above.</em>
        
      </div>
    
      <div class="distro distro-fuerte">
        
        <em>No branch for distro <strong>fuerte</strong>. Known supported distros are highlighted in the buttons above.</em>
        
      </div>
    
      <div class="distro distro-electric">
        
        <em>No branch for distro <strong>electric</strong>. Known supported distros are highlighted in the buttons above.</em>
        
      </div>
    
      <div class="distro distro-diamondback">
        
        <em>No branch for distro <strong>diamondback</strong>. Known supported distros are highlighted in the buttons above.</em>
        
      </div>
    
      <div class="distro distro-c-turtle">
        
        <em>No branch for distro <strong>c-turtle</strong>. Known supported distros are highlighted in the buttons above.</em>
        
      </div>
    
  </div>
</div>

<script src="/js/distro_switch.js"></script>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>ROS Index</li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/rosindex">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">rosindex</span>
            </a>
          </li>
          

        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">A community-maintained index of known ROS packages.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
